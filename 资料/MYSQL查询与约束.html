<!doctype html>
<html lang='en'>
<head>
<meta charset='utf-8'>
<title>Day15-MYSQL查询与约束.md</title><link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css'><style type='text/css'>html, body {overflow-x: initial !important;}.CodeMirror { height: auto; }
.CodeMirror-scroll { overflow-y: hidden; overflow-x: auto; }
.CodeMirror-lines { padding: 4px 0px; }
.CodeMirror pre { }
.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler { background-color: white; }
.CodeMirror-gutters { border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); white-space: nowrap; background-color: rgb(247, 247, 247); }
.CodeMirror-linenumbers { }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.CodeMirror div.CodeMirror-cursor { border-left-width: 1px; border-left-style: solid; border-left-color: black; z-index: 3; }
.CodeMirror div.CodeMirror-secondarycursor { border-left-width: 1px; border-left-style: solid; border-left-color: silver; }
.CodeMirror.cm-keymap-fat-cursor div.CodeMirror-cursor { width: auto; border: 0px; z-index: 1; background: rgb(119, 238, 119); }
.CodeMirror div.CodeMirror-cursor.CodeMirror-overwrite { }
.cm-tab { display: inline-block; }
.cm-s-typora-default .cm-header, .cm-s-typora-default .cm-property { color: rgb(217, 79, 138); }
.cm-s-typora-default pre.cm-header1:not(.cm-atom) :not(.cm-overlay) { font-size: 2rem; line-height: 2rem; }
.cm-s-typora-default pre.cm-header2:not(.cm-atom) :not(.cm-overlay) { font-size: 1.4rem; line-height: 1.4rem; }
.cm-s-typora-default .cm-atom, .cm-s-typora-default .cm-number { color: rgb(149, 132, 134); }
.cm-s-typora-default .cm-table-row, .cm-s-typora-default .cm-block-start { font-family: monospace; }
.cm-s-typora-default .cm-comment { color: rgb(74, 90, 159); font-family: monospace; }
.cm-s-typora-default .cm-tag { color: rgb(169, 68, 66); }
.cm-s-typora-default .cm-string { color: rgb(126, 134, 169); }
.cm-s-typora-default .cm-link { color: rgb(196, 122, 15); text-decoration: underline; }
.cm-s-typora-default .cm-variable-2, .cm-s-typora-default .cm-variable-1 { color: inherit; }
.cm-s-typora-default .cm-overlay { font-size: 1rem; font-family: monospace; }
.CodeMirror.cm-s-typora-default div.CodeMirror-cursor { border-left-width: 3px; border-left-style: solid; border-left-color: rgb(228, 98, 154); }
.cm-s-typora-default .CodeMirror-activeline-background { left: -60px; right: -30px; background: rgba(204, 204, 204, 0.2); }
.cm-s-typora-default .CodeMirror-gutters { border-right-style: none; background-color: inherit; }
.cm-s-typora-default .cm-trailing-space-new-line::after, .cm-startspace::after, .cm-starttab .cm-tab::after { content: "•"; position: absolute; left: 0px; opacity: 0; font-family: LetterGothicStd, monospace; }
.os-windows .cm-startspace::after, .os-windows .cm-starttab .cm-tab::after { left: -0.1em; }
.cm-starttab .cm-tab::after { content: " "; }
.cm-startspace, .cm-tab, .cm-starttab, .cm-trailing-space-a, .cm-trailing-space-b, .cm-trailing-space-new-line { font-family: monospace; position: relative; }
.cm-s-typora-default .cm-trailing-space-new-line::after { content: "↓"; opacity: 0.3; }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: black; }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-property { color: black; }
.cm-s-inner .cm-operator { color: black; }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: blue; }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: bold; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: rgb(255, 0, 0); }
.cm-invalidchar { color: rgb(255, 0, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.CodeMirror-activeline-background { background: rgb(232, 242, 255); }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { margin-bottom: -30px; margin-right: -30px; padding-bottom: 30px; padding-right: 30px; height: 100%; outline: none; position: relative; box-sizing: content-box; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow-x: hidden; overflow-y: scroll; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow-y: hidden; overflow-x: scroll; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; word-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; background: transparent; }
.CodeMirror-wrap pre { word-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right-width: 30px; border-right-style: solid; border-right-color: transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right-style: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-widget { }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right-style: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.CodeMirror-selected { background: rgb(217, 217, 217); }
.CodeMirror-focused .CodeMirror-selected { background: rgb(215, 212, 240); }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
.CodeMirror span { }
@media print { 
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


html { font-size: 14px; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 1rem; line-height: 1.42857; color: rgb(51, 51, 51); overflow-x: hidden; background-color: rgb(255, 255, 255); }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: rgb(181, 214, 252); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; word-wrap: break-word; position: relative; padding-bottom: 70px; white-space: pre-wrap; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export #write { margin: 0px auto; }
#write > p:first-child, #write > ul:first-child, #write > ol:first-child, #write > pre:first-child, #write > blockquote:first-child, #write > div:first-child, #write > table:first-child { margin-top: 30px; }
img { max-width: 100%; }
input, button, select, textarea { color: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
::before, ::after, * { box-sizing: border-box; }
#write p, #write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write div, #write pre { width: inherit; }
#write p, #write h1, #write h2, #write h3, #write h4, #write h5, #write h6 { position: relative; }
h1 { font-size: 2rem; }
p { -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; }
.mathjax-block { margin-top: 0px; margin-bottom: 0px; -webkit-margin-before: 0rem; -webkit-margin-after: 0rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: bold; font-style: italic; }
a { cursor: pointer; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; margin: 4px 0px 0px; }
tr { page-break-inside: avoid; page-break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; page-break-inside: auto; }
table.md-table td { min-width: 80px; }
.CodeMirror-gutters { border-right-width: 0px; background-color: inherit; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
pre { white-space: pre-wrap; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences, pre.md-fences { font-size: 0.9rem; display: block; page-break-inside: avoid; text-align: left; overflow: visible; white-space: pre; position: relative !important; background: inherit; }
.md-fences .CodeMirror.CodeMirror-wrap { top: -1.6em; margin-bottom: -1.6em; }
.md-fences.mock-cm { white-space: pre-wrap; }
.show-fences-line-number pre.md-fences { padding-left: 0px; }
.show-fences-line-number pre.md-fences.mock-cm { padding-left: 40px; }
.footnotes { color: rgb(136, 136, 136); font-size: 0.9rem; padding-top: 1em; padding-bottom: 1em; }
.footnotes + .footnotes { margin-top: -1em; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; text-decoration: none; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 1rem; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: normal; text-align: left; box-sizing: content-box; direction: ltr; background: transparent; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li p, li .mathjax-block { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; }
@media print { 
  html, body { height: 100%; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  h1, h2, h3, h4, h5, h6 { page-break-after: avoid; orphans: 2; }
  p { orphans: 4; }
  @page { margin: 20mm 0mm; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
#write pre.md-meta-block { font-size: 0.8rem; min-height: 2.86rem; white-space: pre-wrap; display: block; background: rgb(204, 204, 204); }
p > .md-image:only-child { display: inline-block; width: 100%; text-align: center; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.mathjax-block { white-space: pre; overflow: hidden; width: 100%; }
p + .mathjax-block { margin-top: -1.143rem; }
.mathjax-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus { outline: none; box-shadow: none; }
.task-list { list-style-type: none; }
.task-list-item { position: relative; padding-left: 1em; }
.task-list-item input { position: absolute; top: 0px; left: 0px; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc::after, .md-toc-content::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: bold; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
.md-toc-h6 { margin-left: 12em; }
@media screen and (max-width: 48em) { 
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 8em; }
  .md-toc-h6 { margin-left: 9.5em; }
}
a.md-toc-inner { color: inherit; font-size: inherit; font-style: inherit; font-weight: inherit; text-decoration: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
.md-tag { opacity: 0.5; }
code { text-align: left; }
h1 .md-tag, h2 .md-tag, h3 .md-tag, h4 .md-tag, h5 .md-tag, h6 .md-tag { font-weight: initial; opacity: 0.35; }
a.md-header-anchor.md-print-anchor { border: none !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: none !important; text-decoration: initial !important; text-shadow: initial !important; background: transparent !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.mathjax-block .MathJax_SVG_Display { text-align: center; margin: 1em 0em; position: relative; text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; width: 100%; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: monospace; }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none; }


@font-face { font-family: 'Open Sans'; font-style: normal; font-weight: normal; src: local(Open Sans Regular), url(file:///C:/Users/Administrator/AppData/Roaming/Typora/themes/github/400.woff) format(woff); }
@font-face { font-family: 'Open Sans'; font-style: italic; font-weight: normal; src: local(Open Sans Italic), url(file:///C:/Users/Administrator/AppData/Roaming/Typora/themes/github/400i.woff) format(woff); }
@font-face { font-family: 'Open Sans'; font-style: normal; font-weight: bold; src: local(Open Sans Bold), url(file:///C:/Users/Administrator/AppData/Roaming/Typora/themes/github/700.woff) format(woff); }
@font-face { font-family: 'Open Sans'; font-style: italic; font-weight: bold; src: local(Open Sans Bold Italic), url(file:///C:/Users/Administrator/AppData/Roaming/Typora/themes/github/700i.woff) format(woff); }
html { font-size: 16px; }
body { font-family: 'Open Sans', 'Clear Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif; color: rgb(51, 51, 51); line-height: 1.6; -webkit-font-smoothing: antialiased; }
#write { max-width: 800px; margin: 0px auto; padding: 20px 30px 40px; }
#write::after { height: 80px; }
#write > ul:first-child, #write > ol:first-child { margin-top: 30px; }
body > :first-child { margin-top: 0px !important; }
body > :last-child { margin-bottom: 0px !important; }
a { color: rgb(65, 131, 196); }
h1, h2, h3, h4, h5, h6 { position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.4; -webkit-font-smoothing: antialiased; cursor: text; }
h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor { text-decoration: none; }
h1 tt, h1 code { font-size: inherit; }
h2 tt, h2 code { font-size: inherit; }
h3 tt, h3 code { font-size: inherit; }
h4 tt, h4 code { font-size: inherit; }
h5 tt, h5 code { font-size: inherit; }
h6 tt, h6 code { font-size: inherit; }
h1 { padding-bottom: 0.3em; font-size: 2.25em; line-height: 1.2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(238, 238, 238); }
h2 { padding-bottom: 0.3em; font-size: 1.75em; line-height: 1.225; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(238, 238, 238); }
h3 { font-size: 1.5em; line-height: 1.43; }
h4 { font-size: 1.25em; }
h5 { font-size: 1em; }
h6 { font-size: 1em; color: rgb(119, 119, 119); }
p, blockquote, ul, ol, dl, table { margin: 0.8em 0px; }
li > ol, li > ul { margin: 0px; }
hr { height: 4px; padding: 0px; margin: 16px 0px; border-width: 0px 0px 1px; border-style: none none solid; overflow: hidden; box-sizing: content-box; border-bottom-color: rgb(221, 221, 221); background-color: rgb(231, 231, 231); }
body > h2:first-child { margin-top: 0px; padding-top: 0px; }
body > h1:first-child { margin-top: 0px; padding-top: 0px; }
body > h1:first-child + h2 { margin-top: 0px; padding-top: 0px; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child { margin-top: 0px; padding-top: 0px; }
a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 { margin-top: 0px; padding-top: 0px; }
h1 p, h2 p, h3 p, h4 p, h5 p, h6 p { margin-top: 0px; }
li p.first { display: inline-block; }
ul, ol { padding-left: 30px; }
ul:first-child, ol:first-child { margin-top: 0px; }
ul:last-child, ol:last-child { margin-bottom: 0px; }
blockquote { border-left-width: 4px; border-left-style: solid; border-left-color: rgb(221, 221, 221); padding: 0px 15px; color: rgb(119, 119, 119); }
blockquote blockquote { padding-right: 0px; }
table { padding: 0px; }
table tr { border-top-width: 1px; border-top-style: solid; border-top-color: rgb(204, 204, 204); margin: 0px; padding: 0px; background-color: white; }
table tr:nth-child(2n) { background-color: rgb(248, 248, 248); }
table tr th { font-weight: bold; border: 1px solid rgb(204, 204, 204); text-align: left; margin: 0px; padding: 6px 13px; }
table tr td { border: 1px solid rgb(204, 204, 204); text-align: left; margin: 0px; padding: 6px 13px; }
table tr th:first-child, table tr td:first-child { margin-top: 0px; }
table tr th:last-child, table tr td:last-child { margin-bottom: 0px; }
.CodeMirror-gutters { border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); }
pre.md-fences, .md-fences, code, tt { border: 1px solid rgb(221, 221, 221); border-radius: 3px; font-family: Consolas, 'Liberation Mono', Courier, monospace; padding: 2px 4px 0px; font-size: 0.9em; background-color: rgb(248, 248, 248); }
pre.md-fences, .md-fences { margin-bottom: 15px; margin-top: 15px; padding: 8px 1em 6px; }
.task-list { padding-left: 0px; }
.task-list-item { padding-left: 32px; }
.task-list-item input { top: 3px; left: 8px; }
@media screen and (min-width: 914px) { 
}
@media print { 
  table, pre { page-break-inside: avoid; }
  pre { word-wrap: break-word; }
}
.md-fences { background-color: rgb(248, 248, 248); }
#write pre.md-meta-block { padding: 1rem; font-size: 85%; line-height: 1.45; border: 0px; border-radius: 3px; color: rgb(119, 119, 119); margin-top: 0px !important; background-color: rgb(247, 247, 247); }
.mathjax-block > .code-tooltip { bottom: 0.375rem; }
#write > h3.md-focus::before { left: -1.5625rem; top: 0.375rem; }
#write > h4.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h5.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h6.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
.md-image > .md-meta { border: 1px solid rgb(221, 221, 221); border-radius: 3px; font-family: Consolas, 'Liberation Mono', Courier, monospace; padding: 2px 4px 0px; font-size: 0.9em; color: inherit; background-color: rgb(248, 248, 248); }
.md-tag { color: inherit; }
.md-toc { margin-top: 20px; padding-bottom: 20px; }
#typora-quick-open { border: 1px solid rgb(221, 221, 221); background-color: rgb(248, 248, 248); }
#typora-quick-open-item { border-color: rgb(254, 254, 254) rgb(229, 229, 229) rgb(229, 229, 229) rgb(238, 238, 238); border-style: solid; border-width: 1px; background-color: rgb(250, 250, 250); }


</style>
</head>
<body class='typora-export' >
<div  id='write'  class = 'is-node'><h1><a name='header-c1' class='md-header-anchor '></a>MySQL查询与约束</h1><h2><a name='header-c6' class='md-header-anchor '></a>学习目标</h2><ol><li>能够使用SQL语句进行排序(重点)</li><li>能够使用聚合函数(重点)</li><li>能够使用SQL语句进行分组查询(掌握)</li><li>能够使用SQL语句进行分页查询(重点)</li><li>能够完成数据的备份和恢复(非常简单)</li><li>能够使用SQL语句添加主键、外键、唯一、非空约束(重点，难点)</li><li>能够说出多表之间的关系及其建表原则(难点)</li><li>能够理解三大范式(了解)</li></ol><h1><a name='header-c32' class='md-header-anchor '></a>第1章 DQL语句</h1><h2><a name='header-c33' class='md-header-anchor '></a>1.1 排序</h2><p>通过<code>ORDER BY</code>子句，可以将查询出的结果进行排序(排序只是显示方式，不会影响数据库中数据的顺序)
<code>SELECT 字段名 FROM 表名 WHERE 字段=值 ORDER BY 字段名 [ASC|DESC];</code>
ASC: 升序, 默认是升序
DESC: 降序</p><h3><a name='header-c39' class='md-header-anchor '></a>1.1.1 单列排序</h3><p>单列排序就是使用一个字段排序</p><p>具体操作：</p><ul><li>查询所有数据,使用年龄降序排序</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure">AخA</div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">SELECT</span> * <span class="cm-keyword">FROM</span> student3 <span class="cm-keyword">ORDER</span> <span class="cm-keyword">BY</span> age <span class="cm-keyword">DESC</span>;</span></pre></div></div></div></div></div></div></div></pre><p><img src='imgs\orderby01.png' alt='' /></p><h3><a name='header-c51' class='md-header-anchor '></a>1.1.2 组合排序</h3><p>组合排序就是先按第一个字段进行排序，如果第一个字段相同，才按第二个字段进行排序，依次类推。
上面的例子中，年龄是有相同的。当年龄相同再使用math进行排序
<code>SELECT 字段名 FROM 表名 WHERE 字段=值 ORDER BY 字段名1 [ASC|DESC], 字段名2 [ASC|DESC];</code></p><p>具体操作：</p><ul><li>查询所有数据,在年龄降序排序的基础上，如果年龄相同再以数学成绩降序排序</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">SELECT</span> * <span class="cm-keyword">FROM</span> student3 <span class="cm-keyword">ORDER</span> <span class="cm-keyword">BY</span> age <span class="cm-keyword">DESC</span>, math <span class="cm-keyword">DESC</span>;</span></pre></div></div></div></div></div></div></div></pre><p><img src='imgs\orderby02.png' alt='' /></p><h2><a name='header-c65' class='md-header-anchor '></a>1.2 聚合函数</h2><p>之前我们做的查询都是横向查询，它们都是根据条件一行一行的进行判断，而使用聚合函数查询是纵向查询，它是对一列的值进行计算，然后返回一个结果值。另外聚合函数会忽略空值</p><p>聚合函数就是用来统计列的数据。</p><p>五个聚合函数：
<code>count</code>： 统计指定列记录数，记录为NULL的不统计
<code>sum</code>： 计算指定列的数值和，如果不是数值类型，那么计算结果为0
<code>max</code>： 计算指定列的最大值
<code>min</code>： 计算指定列的最小值
<code>avg</code>： 计算指定列的平均值，如果不是数值类型，那么计算结果为0</p><p>聚合函数的使用：写在 SQL语句<code>SELECT</code>后 <code>字段名</code>的地方，也就是写在select和from之间
<code>SELECT 字段名... FROM 表名;</code>
<code>SELECT COUNT(age) FROM 表名;</code></p><p>具体操作：</p><ul><li>查询学生总数</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">SELECT</span> <span class="cm-keyword">COUNT</span>(english) <span class="cm-keyword">FROM</span> student3;</span></pre></div></div></div></div></div></div></div></pre><p><img src='imgs\聚合函数01.png' alt='' />
我们发现对于NULL的记录不会统计
IFNULL(expr1, expr2)的用法：假如expr1 不为 NULL，则 IFNULL() 的返回值为 expr1; 否则其返回值为expr2
<img src='imgs\ifnull01.png' alt='' />
我们可以利用IFNULL()函数，如果记录为NULL，给个默认值，这样统计的数据就不会遗漏</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">SELECT</span> <span class="cm-keyword">COUNT</span>(IFNULL(english,<span class="cm-number">0</span>)) <span class="cm-keyword">FROM</span> student3;</span></pre></div></div></div></div></div></div></div></pre><p><img src='imgs\ifnull02.png' alt='' /></p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">SELECT</span> <span class="cm-keyword">COUNT</span>(*) <span class="cm-keyword">FROM</span> student3;</span></pre></div></div></div></div></div></div></div></pre><p><img src='imgs\聚合函数02.png' alt='' /></p><ul><li>查询年龄大于40的总数</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">SELECT</span> <span class="cm-keyword">COUNT</span>(*) <span class="cm-keyword">FROM</span> student3 <span class="cm-keyword">WHERE</span> age&gt;<span class="cm-number">40</span>;</span></pre></div></div></div></div></div></div></div></pre><p><img src='imgs\聚合函数03.png' alt='' /></p><ul><li>查询数学成绩总分</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">SELECT</span> SUM(math) <span class="cm-keyword">FROM</span> student3;</span></pre></div></div></div></div></div></div></div></pre><p><img src='imgs\聚合函数04.png' alt='' /></p><ul><li>查询数学成绩平均分</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">SELECT</span> AVG(math) <span class="cm-keyword">FROM</span> student3;</span></pre></div></div></div></div></div></div></div></pre><p><img src='imgs\聚合函数05.png' alt='' /></p><ul><li>查询数学成绩最高分</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">SELECT</span> MAX(math) <span class="cm-keyword">FROM</span> student3;</span></pre></div></div></div></div></div></div></div></pre><p><img src='imgs\聚合函数06.png' alt='' /></p><ul><li>查询数学成绩最低分</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">SELECT</span> MIN(math) <span class="cm-keyword">FROM</span> student3;</span></pre></div></div></div></div></div></div></div></pre><p><img src='imgs\聚合函数07.png' alt='' /></p><p><strong>注意:聚合函数不能用在where条件中</strong></p><h2><a name='header-c137' class='md-header-anchor '></a>1.3 分组(重点)</h2><p>分组查询是指使用 <code>GROUP BY</code>语句对查询信息进行分组，<code>相同数据作为一组</code>
<code>SELECT 字段1,字段2... FROM 表名 GROUP BY 分组字段 [HAVING 条件];</code></p><p>GROUP BY怎么分组的？<strong>将分组字段结果中相同内容作为一组</strong>
<code>SELECT * FROM student3 GROUP BY sex;</code></p><p>这句话会将sex相同的数据作为一组
<img src='imgs\分组01.png' alt='' /></p><p><code>GROUP BY</code>将分组字段结果中相同内容作为一组，并且返回每组的第一条数据，所以单独分组没什么用处。分组的目的就是为了统计，一般分组会跟聚合函数一起使用。</p><p>分组后聚合函数的作用？不是操作所有数据，而是操作一组数据。对一组数据进行
<code>SELECT SUM(math), sex FROM student3 GROUP BY sex;</code>
效果如下：
<img src='imgs\分组02.png' alt='' /></p><p>实际上是将每组的math进行求和,返回每组统计的结果
<img src='imgs\分组03.png' alt='' /></p><blockquote><p>注意事项：当我们使用某个字段分组,在查询的时候也需要将这个字段查询出来,否则看不到数据属于哪组的</p><ul><li>查询的时候没有查询出分组字段
<img src='imgs\分组04.png' alt='' /></li><li>查询的时候查询出分组字段
<img src='imgs\分组05.png' alt='' /></li></ul></blockquote><p>具体步骤：</p><ul><li>按性别分组</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">SELECT</span> sex <span class="cm-keyword">FROM</span> student3 GROUP <span class="cm-keyword">BY</span> sex;</span></pre></div></div></div></div></div></div></div></pre><p><img src='imgs\分组06.png' alt='' /></p><ul><li>查询男女各多少人</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-number">1</span>.查询所有数据,按性别分组。 <span class="cm-number">2</span>.统计每组人数</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">SELECT</span> sex, <span class="cm-keyword">COUNT</span>(*) <span class="cm-keyword">FROM</span> student3 GROUP <span class="cm-keyword">BY</span> sex;</span></pre></div></div></div></div></div></div></div></pre><p><img src='imgs\分组06.png' alt='' /></p><ul><li>查询年龄大于25岁的人,按性别分组,统计每组的人数</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-number">1</span>.先过滤掉年龄小于25岁的人。2.再分组。3.最后统计每组的人数</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">SELECT</span> sex, <span class="cm-keyword">COUNT</span>(*) <span class="cm-keyword">FROM</span> student3 <span class="cm-keyword">WHERE</span> age &gt; <span class="cm-number">25</span> GROUP <span class="cm-keyword">BY</span> sex;</span></pre></div></div></div></div></div></div></div></pre><p><img src='imgs\分组08.png' alt='' /></p><ul><li>查询年龄大于25岁的人,按性别分组,统计每组的人数,并只显示性别人数大于2的数据
有很多同学可能会将SQL语句写出这样:
<code>SELECT sex, COUNT(*) FROM student3 WHERE age &gt; 25 GROUP BY sex WHERE COUNT(*) &gt;2;</code></li></ul><blockquote><p>注意: 并只显示性别人数&gt;2的数据属于分组后的条件,对于分组后的条件需要使用<code>having</code>子句</p></blockquote><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">SELECT</span> sex, <span class="cm-keyword">COUNT</span>(*) <span class="cm-keyword">FROM</span> student3 <span class="cm-keyword">WHERE</span> age &gt; <span class="cm-number">25</span> GROUP <span class="cm-keyword">BY</span> sex <span class="cm-keyword">HAVING</span> <span class="cm-keyword">COUNT</span>(*) &gt;<span class="cm-number">2</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">只有分组后人数大于2的`男`这组数据显示出来</span></pre></div></div></div></div></div></div></div></pre><p><img src='imgs\分组09.png' alt='' /></p><blockquote><p>having与where的区别</p><ul><li>having是在分组后对数据进行过滤，写在group by的后面</li><li>where是在分组前对数据进行过滤,写在group by的前面</li><li>having后面可以使用聚合函数</li><li>where后面不可以使用聚合函数</li></ul></blockquote><p>准备数据：</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> student3(id,NAME,age,sex,address,math,english) <span class="cm-keyword">VALUES</span> </span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-number">9</span>,<span class="cm-string">'唐僧'</span>,<span class="cm-number">25</span>,<span class="cm-string">'男'</span>,<span class="cm-string">'长安'</span>,<span class="cm-number">87</span>,<span class="cm-number">78</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-number">10</span>,<span class="cm-string">'孙悟空'</span>,<span class="cm-number">18</span>,<span class="cm-string">'男'</span>,<span class="cm-string">'花果山'</span>,<span class="cm-number">100</span>,<span class="cm-number">66</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-number">11</span>,<span class="cm-string">'猪八戒'</span>,<span class="cm-number">22</span>,<span class="cm-string">'男'</span>,<span class="cm-string">'高老庄'</span>,<span class="cm-number">58</span>,<span class="cm-number">78</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-number">12</span>,<span class="cm-string">'沙僧'</span>,<span class="cm-number">50</span>,<span class="cm-string">'男'</span>,<span class="cm-string">'流沙河'</span>,<span class="cm-number">77</span>,<span class="cm-number">88</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-number">13</span>,<span class="cm-string">'白骨精'</span>,<span class="cm-number">22</span>,<span class="cm-string">'女'</span>,<span class="cm-string">'白虎岭'</span>,<span class="cm-number">66</span>,<span class="cm-number">66</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-number">14</span>,<span class="cm-string">'蜘蛛精'</span>,<span class="cm-number">23</span>,<span class="cm-string">'女'</span>,<span class="cm-string">'盘丝洞'</span>,<span class="cm-number">88</span>,<span class="cm-number">88</span>);</span></pre></div></div></div></div></div></div></div></pre><h2><a name='header-c223' class='md-header-anchor '></a>1.4 limit语句做分页查询(很重要)</h2><p><code>LIMIT</code>是<code>限制</code>的意思，所以<code>LIMIT</code>的作用就是限制查询记录的条数。
<code>SELECT *|字段列表 [as 别名] FROM 表名 [WHERE子句] [GROUP BY子句][HAVING子句][ORDER BY子句][LIMIT子句];</code>
思考：limit子句为什么排在最后？
因为前面所有的限制条件都处理完了，只剩下显示多少条记录的问题了！</p><p><strong>LIMIT语法格式</strong>：
<code>LIMIT offset,length;   或者limit length;</code>
<code>offset</code>是指偏移量，可以认为是跳过的记录数量，默认为0
<code>length</code>是指需要显示的总记录数</p><p>具体步骤：</p><ul><li>查询学生表中数据，从第三条开始显示，显示6条</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;">我们可以认为跳过前面2条，取6条数据</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">SELECT</span> * <span class="cm-keyword">FROM</span> student3 LIMIT <span class="cm-number">2</span>,<span class="cm-number">6</span>;</span></pre></div></div></div></div></div></div></div></pre><p><img src='imgs\limit02.png' alt='' /></p><p><strong>LIMIT的使用场景</strong>：分页
比如我们登录京东，淘宝，返回的商品信息可能有几万条，不是一次全部显示出来。是一页显示固定的条数。
假设我们一每页显示5条记录的方式来分页，SQL语句如下：</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">-- 每页显示5条</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">-- 第一页： LIMIT 0,5;<span class="cm-tab">  </span>跳过0条，显示5条</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">-- 第二页： LIMIT 5,5;  跳过5条，显示5条</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">-- 第三页： LIMIT 10,5; 跳过10条，显示5条</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">SELECT</span> * <span class="cm-keyword">FROM</span> student3 LIMIT <span class="cm-number">0</span>,<span class="cm-number">5</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">SELECT</span> * <span class="cm-keyword">FROM</span> student3 LIMIT <span class="cm-number">5</span>,<span class="cm-number">5</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">SELECT</span> * <span class="cm-keyword">FROM</span> student3 LIMIT <span class="cm-number">10</span>,<span class="cm-number">5</span>;</span></pre></div></div></div></div></div></div></div></pre><p><img src='imgs\limit03.png' alt='' /></p><blockquote><p><strong>注意</strong>：</p><ul><li>如果第一个参数是0可以简写：
<code>SELECT * FROM student3 LIMIT 0,5;</code>
<code>SELECT * FROM student3 LIMIT 5;</code></li><li>LIMIT 10，5; -- 不够5条，有多少显示多少</li><li>根据页数计算出开始查询的数据的下标的公式:a = (page-1)*b</li></ul></blockquote><p><strong>使用limit查询获取年龄最大的学生的信息</strong>
先查出所有的学生信息，再按照年龄的降序排列，再取出第一个学生
SELECT * FROM student3 ORDER BY age DESC LIMIT 0,1</p><h1><a name='header-c270' class='md-header-anchor '></a>第2章 数据库备份(很简单)</h1><h2><a name='header-c271' class='md-header-anchor '></a>2.1 备份的应用场景</h2><p>​	在服务器进行数据传输、数据存储和数据交换，就有可能产生数据故障。比如发生意外停机或存储介质损坏。这时，如果没有采取数据备份和数据恢复手段与措施，就会导致数据的丢失，造成的损失是无法弥补与估量的。</p><h2><a name='header-c274' class='md-header-anchor '></a>2.2 source命令备份与还原</h2><p><strong>备份格式</strong>：
<code>mysqldump -u用户名 -p密码 数据库 &gt; 文件的路径</code></p><p><strong>还原格式</strong>：
<code>SOURCE 导入文件的路径;</code></p><blockquote><p>注意：还原的时候需要先登录MySQL,并选中对应的数据库</p></blockquote><p><strong>具体操作</strong>：</p><ul><li>备份day22数据库中的数据</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;">mysqldump -uroot -proot day22 &gt; C:\work\课改\MYSQL课改资料\Day02-MYSQL多表查询\code\bak<span class="cm-variable-2">.sql</span></span></pre></div></div></div></div></div></div></div></pre><p><img src='imgs\数据库导出01.png' alt='' /></p><p><strong>数据库中的所有表和数据都会导出成SQL语句</strong>
<img src='imgs\数据库导出02.png' alt='' /></p><ul><li><p>还原day22数据库中的数据</p><ul><li>删除day22数据库中的所有表
<img src='imgs\数据库导出08.png' alt='' /></li><li>登录MySQL</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"> mysql -uroot -proot</span></pre></div></div></div></div></div></div></div></pre><ul><li>选中数据库</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"> use day22;</span></pre><pre class=""><span style="padding-right: 0.1px;"> <span class="cm-keyword">select</span> database();</span></pre></div></div></div></div></div></div></div></pre><p> <img src='imgs\数据库导出03.png' alt='' /></p><ul><li>使用SOURCE命令还原数据</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"> source C:\work\课改\MYSQL课改资料\Day02-MYSQL多表查询\code\bak<span class="cm-variable-2">.sql</span></span></pre></div></div></div></div></div></div></div></pre><p> <img src='imgs\数据库导出04.png' alt='' /></p></li></ul><h2><a name='header-c323' class='md-header-anchor '></a>2.3 图形化界面备份与还原</h2><ul><li><p>备份day22数据库中的数据</p><pre class='md-fences mock-cm' style='display:block;position:relative'>    选中数据库，右键 ”备份/导出”，指定导出路径，保存成.sql文件即可。
    ![](imgs\数据库导出05.png)
    ![](imgs\数据库导出06.png)</pre><pre class='md-fences mock-cm' style='display:block;position:relative'>**包含创建数据库的语句**
![](imgs\数据库导出07.png)</pre></li><li><p>还原day22数据库中的数据</p><ul><li>删除day22数据库</li><li>数据库列表区域右键“执行SQL脚本”， 指定要执行的SQL文件，执行即可
<img src='imgs\数据库导出09.png' alt='' />
<img src='imgs\数据库导出10.png' alt='' /></li></ul></li></ul><h1><a name='header-c343' class='md-header-anchor '></a>第3章 数据库约束(重点)</h1><p>对表中的数据进行进一步的限制，保证数据的<strong>正确性</strong>、<strong>有效性</strong>和<strong>完整性</strong>。
<strong>约束种类</strong>：</p><ul><li><code>PRIMARY KEY</code>: 主键</li><li><code>UNIQUE</code>: 唯一</li><li><code>NOT NULL</code>: 非空</li><li><code>DEFAULT</code>: 默认</li><li><code>FOREIGN KEY</code>: 外键</li></ul><h2><a name='header-c363' class='md-header-anchor '></a>3.1主键(非空并且唯一)</h2><h3><a name='header-c364' class='md-header-anchor '></a>3.1.1 主键的作用</h3><p><strong>用来唯一标识一条记录</strong>，每个表都应该有一个主键，并且每个表只能有一个主键。
有些记录的 name,age,score 字段的值都一样时,那么就没法区分这些数据,造成数据库的记录不唯一,这样就不方便管理数据
<img src='imgs\主键01.png' alt='' />
<img src='imgs\主键02.png' alt='' /></p><p><strong>哪个字段应该作为表的主键？</strong></p><pre class='md-fences mock-cm' style='display:block;position:relative'>通常不用业务字段作为主键，单独给每张表设计一个id的字段，把id作为主键。主键是给数据库和程序使用的，不是给最终的客户使用的。所以主键有没有含义没有关系，只要不重复，非空就行。</pre><h3><a name='header-c374' class='md-header-anchor '></a>3.1.2 创建主键</h3><p>主键：<code>PRIMARY KEY</code>
<strong>主键的特点</strong>：</p><ul><li>主键必须包含唯一的值</li><li>主键列不能包含NULL值</li></ul><p><strong>创建主键方式</strong>：</p><ol><li><strong>在创建表的时候给字段添加主键</strong>(重要)
  <code>字段名 字段类型 PRIMARY KEY</code></li><li><strong>在已有表中添加主键</strong>(了解)
  <code>ALTER TABLE 表名 ADD PRIMARY KEY(字段名);</code></li></ol><p>具体操作：</p><ul><li>创建表学生表st5, 包含字段(id, name, age)将id做为主键</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLE</span> st5 (</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>id <span class="cm-builtin">INT</span> PRIMARY KEY, <span class="cm-comment">-- id是主键</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>NAME <span class="cm-builtin">VARCHAR</span>(<span class="cm-number">20</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>age <span class="cm-builtin">INT</span></span></pre><pre class=""><span style="padding-right: 0.1px;">);</span></pre></div></div></div></div></div></div></div></pre><p><img src='imgs\主键03.png' alt='' /></p><ul><li>添加数据</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> st5 (id, NAME) <span class="cm-keyword">VALUES</span> (<span class="cm-number">1</span>, <span class="cm-string">'唐伯虎'</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> st5 (id, NAME) <span class="cm-keyword">VALUES</span> (<span class="cm-number">2</span>, <span class="cm-string">'周文宾'</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> st5 (id, NAME) <span class="cm-keyword">VALUES</span> (<span class="cm-number">3</span>, <span class="cm-string">'祝枝山'</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> st5 (id, NAME) <span class="cm-keyword">VALUES</span> (<span class="cm-number">4</span>, <span class="cm-string">'文征明'</span>);</span></pre></div></div></div></div></div></div></div></pre><ul><li>插入重复的主键值</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">-- 主键是唯一的不能重复：Duplicate entry '1' for key 'PRIMARY'</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> st5 (id, NAME) <span class="cm-keyword">VALUES</span> (<span class="cm-number">1</span>, <span class="cm-string">'文征明2'</span>);</span></pre></div></div></div></div></div></div></div></pre><ul><li>插入NULL的主键值</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">-- 主键是不能为空的：Column 'id' cannot be null</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> st5 (id, NAME) <span class="cm-keyword">VALUES</span> (<span class="cm-atom">NULL</span>, <span class="cm-string">'文征明3'</span>);</span></pre></div></div></div></div></div></div></div></pre><h3><a name='header-c420' class='md-header-anchor '></a>3.1.3 删除主键(很少用到)</h3><p><code>ALTER TABLE 表名 DROP PRIMARY KEY;</code></p><p>具体操作：</p><ul><li>删除st5表的主键</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">ALTER</span> <span class="cm-keyword">TABLE</span> st5 <span class="cm-keyword">DROP</span> PRIMARY KEY;</span></pre></div></div></div></div></div></div></div></pre><p><img src='imgs\主键04.png' alt='' /></p><h3><a name='header-c432' class='md-header-anchor '></a>3.1.4 主键自增</h3><p>​	主键如果让我们自己添加很有可能重复,我们通常希望在每次插入新记录时,数据库自动生成主键字段的值
<code>AUTO_INCREMENT</code> 表示自动增长(字段类型必须是整数类型)</p><p>具体操作：</p><ul><li>创建学生表st6, 包含字段(id, name, age)将id做为主键并自动增长</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLE</span> st6 (</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>id <span class="cm-builtin">INT</span> PRIMARY KEY AUTO_INCREMENT,</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>NAME <span class="cm-builtin">VARCHAR</span>(<span class="cm-number">20</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>age <span class="cm-builtin">INT</span></span></pre><pre class=""><span style="padding-right: 0.1px;">);</span></pre></div></div></div></div></div></div></div></pre><ul><li>插入数据</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">-- 主键默认从1开始自动增长</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> st6 (NAME, age) <span class="cm-keyword">VALUES</span> (<span class="cm-string">'唐僧'</span>, <span class="cm-number">22</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> st6 (NAME, age) <span class="cm-keyword">VALUES</span> (<span class="cm-string">'孙悟空'</span>, <span class="cm-number">26</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> st6 (NAME, age) <span class="cm-keyword">VALUES</span> (<span class="cm-string">'猪八戒'</span>, <span class="cm-number">25</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> st6 (NAME, age) <span class="cm-keyword">VALUES</span> (<span class="cm-string">'沙僧'</span>, <span class="cm-number">20</span>);</span></pre></div></div></div></div></div></div></div></pre><p><img src='imgs\主键05.png' alt='' /></p><p>扩展
默认地AUTO_INCREMENT 的开始值是1，如果希望修改起始值,请使用下列SQL语法
<code>ALTER TABLE 表名 AUTO_INCREMENT=起始值;</code>(了解)</p><p>DELETE和TRUNCATE的区别</p><ul><li>DELETE 删除表中的数据，但不重置AUTO_INCREMENT的值。
<img src='imgs\主键06.png' alt='' /></li><li>TRUNCATE 摧毁表，重建表，AUTO_INCREMENT重置为1
<img src='imgs\主键07.png' alt='' /></li></ul><h2><a name='header-c465' class='md-header-anchor '></a>3.2 唯一</h2><p>在这张表中这个字段的值不能重复</p><h3><a name='header-c468' class='md-header-anchor '></a>3.2.1 唯一约束的基本格式</h3><p><code>字段名 字段类型 UNIQUE</code></p><h3><a name='header-c471' class='md-header-anchor '></a>3.2.2 实现唯一约束</h3><p>具体步骤：</p><ul><li>创建学生表st7, 包含字段(id, name),name这一列设置唯一约束,不能出现同名的学生</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLE</span> st7 (</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>id <span class="cm-builtin">INT</span>,</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>NAME <span class="cm-builtin">VARCHAR</span>(<span class="cm-number">20</span>) UNIQUE</span></pre><pre class=""><span style="padding-right: 0.1px;">);</span></pre></div></div></div></div></div></div></div></pre><ul><li>添加一个学生</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> st7 <span class="cm-keyword">VALUES</span> (<span class="cm-number">1</span>, <span class="cm-string">'貂蝉'</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> st7 <span class="cm-keyword">VALUES</span> (<span class="cm-number">2</span>, <span class="cm-string">'西施'</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> st7 <span class="cm-keyword">VALUES</span> (<span class="cm-number">3</span>, <span class="cm-string">'王昭君'</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> st7 <span class="cm-keyword">VALUES</span> (<span class="cm-number">4</span>, <span class="cm-string">'杨玉环'</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">-- 插入相同的名字出现name重复: Duplicate entry '貂蝉' for key 'name'</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> st7 <span class="cm-keyword">VALUES</span> (<span class="cm-number">5</span>, <span class="cm-string">'貂蝉'</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">-- 出现多个null的时候会怎样？因为null是没有值，所以不存在重复的问题</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> st3 <span class="cm-keyword">VALUES</span> (<span class="cm-number">5</span>, <span class="cm-atom">NULL</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> st3 <span class="cm-keyword">VALUES</span> (<span class="cm-number">6</span>, <span class="cm-atom">NULL</span>);</span></pre></div></div></div></div></div></div></div></pre><h2><a name='header-c484' class='md-header-anchor '></a>3.3 非空</h2><p>这个字段必须设置值,不能是NULL</p><h3><a name='header-c487' class='md-header-anchor '></a>3.3.1 非空约束的基本语法格式</h3><p><code>字段名 字段类型 NOT NULL</code></p><p>具体操作：</p><ul><li>创建表学生表st8, 包含字段(id,name,gender)其中name不能为NULL</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLE</span> st8 (</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>id <span class="cm-builtin">INT</span>,</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>NAME <span class="cm-builtin">VARCHAR</span>(<span class="cm-number">20</span>) <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span>,</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>gender <span class="cm-builtin">CHAR</span>(<span class="cm-number">2</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;">);</span></pre></div></div></div></div></div></div></div></pre><ul><li>添加一条完整的记录</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> st8 <span class="cm-keyword">VALUES</span> (<span class="cm-number">1</span>, <span class="cm-string">'郭富城'</span>, <span class="cm-string">'男'</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> st8 <span class="cm-keyword">VALUES</span> (<span class="cm-number">2</span>, <span class="cm-string">'黎明'</span>, <span class="cm-string">'男'</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> st8 <span class="cm-keyword">VALUES</span> (<span class="cm-number">3</span>, <span class="cm-string">'张学友'</span>, <span class="cm-string">'男'</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> st8 <span class="cm-keyword">VALUES</span> (<span class="cm-number">4</span>, <span class="cm-string">'刘德华'</span>, <span class="cm-string">'男'</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">-- 姓名不赋值出现姓名不能为null: Column 'name' cannot be null</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> st8 <span class="cm-keyword">VALUES</span> (<span class="cm-number">5</span>, <span class="cm-atom">NULL</span>, <span class="cm-string">'男'</span>);</span></pre></div></div></div></div></div></div></div></pre><h3><a name='header-c502' class='md-header-anchor '></a>3.3.2 默认值</h3><p>往表中添加数据时,如果不指定这个字段的数据,就使用默认值</p><p>默认值格式
<code>字段名 字段类型 DEFAULT 默认值</code></p><p>具体步骤：</p><ul><li>创建一个学生表 st9，包含字段(id,name,address)， 地址默认值是广州</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLE</span> st9 (</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>id <span class="cm-builtin">INT</span>,</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>NAME <span class="cm-builtin">VARCHAR</span>(<span class="cm-number">20</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>address <span class="cm-builtin">VARCHAR</span>(<span class="cm-number">50</span>) DEFAULT <span class="cm-string">'广州'</span></span></pre><pre class=""><span style="padding-right: 0.1px;">);</span></pre></div></div></div></div></div></div></div></pre><ul><li>添加一条记录,使用默认地址</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> st9 (id, NAME) <span class="cm-keyword">VALUES</span> (<span class="cm-number">1</span>, <span class="cm-string">'刘德华'</span>);</span></pre></div></div></div></div></div></div></div></pre><p><img src='imgs\默认值.png' alt='' /></p><ul><li>添加一条记录,不使用默认地址</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> st9 <span class="cm-keyword">VALUES</span> (<span class="cm-number">2</span>, <span class="cm-string">'张学友'</span>, <span class="cm-string">'香港'</span>);</span></pre></div></div></div></div></div></div></div></pre><p>疑问:如果一个字段设置了非空与唯一约束，该字段与主键的区别</p><ul><li>一张表中只有一个字段可以设置为主键</li><li>一张表中可以多个字段非空与唯一约束</li><li>主键可以自动增长，非空与唯一约束的字段不能自动增长</li></ul><h2><a name='header-c539' class='md-header-anchor '></a>3.4 外键(难点)</h2><h3><a name='header-c540' class='md-header-anchor '></a>3.4.1 单表的缺点</h3><p>创建一个员工表包含如下列(id, name, age, dep_name, dep_location),id主键并自动增长,添加5条数据</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLE</span> emp (</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>id <span class="cm-builtin">INT</span> PRIMARY KEY AUTO_INCREMENT,</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>NAME <span class="cm-builtin">VARCHAR</span>(<span class="cm-number">30</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>age <span class="cm-builtin">INT</span>,</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>dep_name <span class="cm-builtin">VARCHAR</span>(<span class="cm-number">30</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>dep_location <span class="cm-builtin">VARCHAR</span>(<span class="cm-number">30</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;">);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">-- 添加数据</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> emp (NAME, age, dep_name, dep_location) <span class="cm-keyword">VALUES</span> (<span class="cm-string">'张三'</span>, <span class="cm-number">20</span>, <span class="cm-string">'研发部'</span>, <span class="cm-string">'广州'</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> emp (NAME, age, dep_name, dep_location) <span class="cm-keyword">VALUES</span> (<span class="cm-string">'李四'</span>, <span class="cm-number">21</span>, <span class="cm-string">'研发部'</span>, <span class="cm-string">'广州'</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> emp (NAME, age, dep_name, dep_location) <span class="cm-keyword">VALUES</span> (<span class="cm-string">'王五'</span>, <span class="cm-number">20</span>, <span class="cm-string">'研发部'</span>, <span class="cm-string">'广州'</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> emp (NAME, age, dep_name, dep_location) <span class="cm-keyword">VALUES</span> (<span class="cm-string">'老王'</span>, <span class="cm-number">20</span>, <span class="cm-string">'销售部'</span>, <span class="cm-string">'深圳'</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> emp (NAME, age, dep_name, dep_location) <span class="cm-keyword">VALUES</span> (<span class="cm-string">'大王'</span>, <span class="cm-number">22</span>, <span class="cm-string">'销售部'</span>, <span class="cm-string">'深圳'</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> emp (NAME, age, dep_name, dep_location) <span class="cm-keyword">VALUES</span> (<span class="cm-string">'小王'</span>, <span class="cm-number">18</span>, <span class="cm-string">'销售部'</span>, <span class="cm-string">'深圳'</span>);</span></pre></div></div></div></div></div></div></div></pre><p>缺点:表中出现了很多重复的数据(数据冗余)，如果要修改研发部的地址需要修改3个地方。
<img src='imgs\外键01.png' alt='' /></p><p>解决方案:将一张表分成2张表(员工表和部门表)
<img src='imgs\外键02.png' alt='' /></p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">-- 创建部门表</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLE</span> department (</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>id <span class="cm-builtin">INT</span> PRIMARY KEY AUTO_INCREMENT,</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>dep_name <span class="cm-builtin">VARCHAR</span>(<span class="cm-number">20</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>dep_location <span class="cm-builtin">VARCHAR</span>(<span class="cm-number">20</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;">);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">-- 创建员工表</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLE</span> employee (</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>id <span class="cm-builtin">INT</span> PRIMARY KEY AUTO_INCREMENT,</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>NAME <span class="cm-builtin">VARCHAR</span>(<span class="cm-number">20</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>age <span class="cm-builtin">INT</span>,</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>dep_id <span class="cm-builtin">INT</span></span></pre><pre class=""><span style="padding-right: 0.1px;">);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">-- 添加2个部门</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> department (dep_name, dep_location) <span class="cm-keyword">VALUES</span> (<span class="cm-string">'研发部'</span>, <span class="cm-string">'广州'</span>), (<span class="cm-string">'销售部'</span>, <span class="cm-string">'深圳'</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">-- 添加员工,dep_id表示员工所在的部门</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> employee (NAME, age, dep_id) <span class="cm-keyword">VALUES</span> </span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-string">'张三'</span>, <span class="cm-number">20</span>, <span class="cm-number">1</span>), </span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-string">'李四'</span>, <span class="cm-number">21</span>, <span class="cm-number">1</span>), </span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-string">'王五'</span>, <span class="cm-number">20</span>, <span class="cm-number">1</span>), </span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-string">'老王'</span>, <span class="cm-number">20</span>, <span class="cm-number">2</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-string">'大王'</span>, <span class="cm-number">22</span>, <span class="cm-number">2</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-string">'小王'</span>, <span class="cm-number">18</span>, <span class="cm-number">2</span>);</span></pre></div></div></div></div></div></div></div></pre><p><strong>问题</strong>：
当我们在employee的dep_id里面输入不存在的部门,数据依然可以添加.但是并没有对应的部门，不能出现这种情况。employee的dep_id中的内容只能是department表中存在的id
<img src='imgs\外键03.png' alt='' /></p><p><strong>目标</strong>:需要约束dep_id只能是department表中已经存在id
<strong>解决方式</strong>:使用外键约束</p><h3><a name='header-c558' class='md-header-anchor '></a>3.4.2 什么是外键约束</h3><p>一张表中的某个字段引用另一个表的主键
主表： 约束别人
副表/从表： 使用别人的数据，被别人约束
<img src='imgs\外键04.png' alt='' /></p><h3><a name='header-c564' class='md-header-anchor '></a>3.4.3 创建外键</h3><ol><li><strong>新建表时增加外键</strong>：
<code>[CONSTRAINT] [外键约束名称] FOREIGN KEY(外键字段名) REFERENCES 主表名(主键字段名)</code>
<strong>关键字解释</strong>：
CONSTRAINT -- 约束关键字，用于给外键命名,如果创建的时候不给外键命名，外键会默认命名。
FOREIGN KEY(外键字段名) –- 某个字段作为外键
REFERENCES -- 主表名(主键字段名) 表示参照主表中的某个字段</li><li><strong>已有表增加外键</strong>：
<code>ALTER TABLE 从表 ADD [CONSTRAINT] [外键约束名称] FOREIGN KEY (外键字段名) REFERENCES 主表(主键字段名);</code></li></ol><p>具体操作：</p><ul><li>副表/从表: 被别人约束,表结构添加外键约束</li><li>删除副表/从表 employee</li><li>创建从表 employee 并添加外键约束</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLE</span> employee (</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>id <span class="cm-builtin">INT</span> PRIMARY KEY AUTO_INCREMENT,</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>NAME <span class="cm-builtin">VARCHAR</span>(<span class="cm-number">20</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>age <span class="cm-builtin">INT</span>,</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>dep_id <span class="cm-builtin">INT</span>,</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-comment">-- 添加一个外键</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-comment">-- 外键取名一般fk结尾</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>CONSTRAINT emp_depid_ref_dep_id_fk FOREIGN KEY(dep_id) REFERENCES department(id)</span></pre><pre class=""><span style="padding-right: 0.1px;">);</span></pre></div></div></div></div></div></div></div></pre><ul><li>正常添加数据</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> employee (NAME, age, dep_id) <span class="cm-keyword">VALUES</span></span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-string">'张三'</span>, <span class="cm-number">20</span>, <span class="cm-number">1</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-string">'李四'</span>, <span class="cm-number">21</span>, <span class="cm-number">1</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-string">'王五'</span>, <span class="cm-number">20</span>, <span class="cm-number">1</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-string">'老王'</span>, <span class="cm-number">20</span>, <span class="cm-number">2</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-string">'大王'</span>, <span class="cm-number">22</span>, <span class="cm-number">2</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-string">'小王'</span>, <span class="cm-number">18</span>, <span class="cm-number">2</span>);</span></pre></div></div></div></div></div></div></div></pre><ul><li>部门错误的数据添加失败</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> employee (NAME, age, dep_id) <span class="cm-keyword">VALUES</span> (<span class="cm-string">'二王'</span>, <span class="cm-number">20</span>, <span class="cm-number">5</span>);</span></pre></div></div></div></div></div></div></div></pre><h3><a name='header-c601' class='md-header-anchor '></a>3.4.4 删除外键</h3><p>根据外键名进行删除，记住:不是外键字段名</p><p><code>ALTER TABLE 从表 drop foreign key 外键名称;</code></p><p>具体操作：</p><ul><li>删除employee表的emp_depid_ref_dep_id_fk外键</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">ALTER</span> <span class="cm-keyword">TABLE</span> employee <span class="cm-keyword">DROP</span> FOREIGN KEY emp_depid_ref_dep_id_fk;</span></pre></div></div></div></div></div></div></div></pre><ul><li>在employee表情存在况下添加外键</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">ALTER</span> <span class="cm-keyword">TABLE</span> employee ADD CONSTRAINT emp_depid_ref_dep_id_fk FOREIGN KEY(dep_id) REFERENCES department(id);</span></pre></div></div></div></div></div></div></div></pre><h3><a name='header-c618' class='md-header-anchor '></a>3.4.5 外键的级联</h3><p>要把部门表中的id值2，改成5，能不能直接修改呢？</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">UPDATE</span> department <span class="cm-keyword">SET</span> id=<span class="cm-number">5</span> <span class="cm-keyword">WHERE</span> id=<span class="cm-number">2</span>;</span></pre></div></div></div></div></div></div></div></pre><p>不能直接修改:Cannot delete or update a parent row: a foreign key constraint fails 如果副表(员工表)中有引用的数据,不能直接修改主表(部门表)主键</p><p>要删除部门id等于1的部门, 能不能直接删除呢？</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">DELETE</span> <span class="cm-keyword">FROM</span> department <span class="cm-keyword">WHERE</span> id = <span class="cm-number">1</span>;</span></pre></div></div></div></div></div></div></div></pre><p>不能直接删除:Cannot delete or update a parent row: a foreign key constraint fails 如果副表(员工表)中有引用的数据,不能直接删除主表(部门表)数据</p><p><strong>什么是级联操作</strong>：
在修改和删除主表的主键时，同时更新或删除副表的外键值，称为级联操作
<code>ON UPDATE CASCADE</code> -- 级联更新，主键发生更新时，外键也会更新
<code>ON DELETE CASCADE</code> -- 级联删除，主键发生删除时，外键也会删除</p><p>具体操作：</p><ul><li>删除employee表</li><li>重新创建employee表，添加级联更新和级联删除</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLE</span> employee (</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>id <span class="cm-builtin">INT</span> PRIMARY KEY AUTO_INCREMENT,</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>NAME <span class="cm-builtin">VARCHAR</span>(<span class="cm-number">30</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>age <span class="cm-builtin">INT</span>,</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>dep_id <span class="cm-builtin">INT</span>,</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-comment">-- 添加外键约束,并且添加级联更新和级联删除</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>CONSTRAINT employee_dep_fk FOREIGN KEY (dep_id) REFERENCES department(id) <span class="cm-keyword">ON</span> <span class="cm-keyword">UPDATE</span> CASCADE <span class="cm-keyword">ON</span> <span class="cm-keyword">DELETE</span> CASCADE</span></pre><pre class=""><span style="padding-right: 0.1px;">);</span></pre></div></div></div></div></div></div></div></pre><ul><li>再次添加数据到员工表和部门表</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> employee (NAME, age, dep_id) <span class="cm-keyword">VALUES</span> (<span class="cm-string">'张三'</span>, <span class="cm-number">20</span>, <span class="cm-number">1</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> employee (NAME, age, dep_id) <span class="cm-keyword">VALUES</span> (<span class="cm-string">'李四'</span>, <span class="cm-number">21</span>, <span class="cm-number">1</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> employee (NAME, age, dep_id) <span class="cm-keyword">VALUES</span> (<span class="cm-string">'王五'</span>, <span class="cm-number">20</span>, <span class="cm-number">1</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> employee (NAME, age, dep_id) <span class="cm-keyword">VALUES</span> (<span class="cm-string">'老王'</span>, <span class="cm-number">20</span>, <span class="cm-number">2</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> employee (NAME, age, dep_id) <span class="cm-keyword">VALUES</span> (<span class="cm-string">'大王'</span>, <span class="cm-number">22</span>, <span class="cm-number">2</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> employee (NAME, age, dep_id) <span class="cm-keyword">VALUES</span> (<span class="cm-string">'小王'</span>, <span class="cm-number">18</span>, <span class="cm-number">2</span>);</span></pre></div></div></div></div></div></div></div></pre><ul><li>把部门表中id等于1的部门改成id等于10</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">UPDATE</span> department <span class="cm-keyword">SET</span> id=<span class="cm-number">10</span> <span class="cm-keyword">WHERE</span> id=<span class="cm-number">1</span>;</span></pre></div></div></div></div></div></div></div></pre><p><img src='imgs\级联操作01.png' alt='' /></p><ul><li>删除部门号是2的部门</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">DELETE</span> <span class="cm-keyword">FROM</span> department <span class="cm-keyword">WHERE</span> id=<span class="cm-number">2</span>;</span></pre></div></div></div></div></div></div></div></pre><p><img src='imgs\级联操作02.png' alt='' /></p><h1><a name='header-c663' class='md-header-anchor '></a>第4章 表关系(理解)</h1><h2><a name='header-c664' class='md-header-anchor '></a>4.1 表关系的概念</h2><p>​	现实生活中，实体与实体之间肯定是有关系的，比如：老公和老婆，部门和员工，老师和学生等。那么我们在设计表的时候，就应该体现出表与表之间的这种关系！分成三种：</p><ol><li>一对一(了解)</li><li>一对多</li><li>多对多</li></ol><h2><a name='header-c677' class='md-header-anchor '></a>4.2 一对多</h2><p>一对多（1:n）
例如：班级和学生，部门和员工，客户和订单，分类和商品
一对多建表原则: 在从表(多方)创建一个字段,作为外键指向主表(一方)的主键
<img src='imgs\一对多.png' alt='' /></p><h2><a name='header-c683' class='md-header-anchor '></a>4.3 多对多</h2><p>多对多（m:n）
例如：老师和学生，学生和课程，用户和角色
多对多关系建表原则: 需要创建第三张表，该表中至少两个字段，这两个字段分别作为外键指向各自一方的主键。
<img src='imgs\多对多.png' alt='' /></p><h2><a name='header-c689' class='md-header-anchor '></a>4.4 一对一(不要学)</h2><p>一对一（1:1）
在实际的开发中应用不多.因为一对一可以创建成一张表。
两种建表原则：</p><ul><li>外键唯一：主表的主键和从表的外键（唯一），形成主外键关系，外键唯一<code>UNIQUE</code></li><li>外键是主键：主表的主键和从表的主键，形成主外键关系
<img src='imgs\1对1.png' alt='' />
<img src='imgs\1对12.png' alt='' /></li></ul><p><strong>一对多关系练习</strong>
以下案例是我们JavaWeb课程最后的小项目.我们拿出其中一部分需求,根据需求来设计数据库表之间的关系</p><p>一个旅游线路分类中有多个旅游线路
<img src='imgs\1对多练习01.png' alt='' />
<img src='imgs\1对多练习03.png' alt='' />
<img src='imgs\1对多练习02.png' alt='' />
具体操作：</p><ul><li>创建旅游线路分类表</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLE</span> tab_category (</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; cid <span class="cm-builtin">INT</span> PRIMARY KEY AUTO_INCREMENT, <span class="cm-comment">-- 旅游线路分类主键</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; cname <span class="cm-builtin">VARCHAR</span>(<span class="cm-number">100</span>) <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span> UNIQUE <span class="cm-comment">-- 旅游线路分类名称</span></span></pre><pre class=""><span style="padding-right: 0.1px;">);</span></pre></div></div></div></div></div></div></div></pre><ul><li>添加旅游线路分类数据</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> tab_category (cname) <span class="cm-keyword">VALUES</span> (<span class="cm-string">'周边游'</span>), (<span class="cm-string">'出境游'</span>), (<span class="cm-string">'国内游'</span>), (<span class="cm-string">'港澳游'</span>);</span></pre></div></div></div></div></div></div></div></pre><ul><li>创建旅游线路表</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLE</span> tab_route (</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; rid <span class="cm-builtin">INT</span> PRIMARY KEY AUTO_INCREMENT, <span class="cm-comment">-- 旅游线路主键</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; rname <span class="cm-builtin">VARCHAR</span>(<span class="cm-number">100</span>) <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span> UNIQUE, <span class="cm-comment">-- 旅游线路名称</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; price <span class="cm-builtin">DOUBLE</span> <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span>,  <span class="cm-comment">-- 价格</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; routeIntroduce <span class="cm-builtin">VARCHAR</span>(<span class="cm-number">200</span>), <span class="cm-comment">-- 线路介绍</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; rflag <span class="cm-builtin">CHAR</span>(<span class="cm-number">1</span>) <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span>, <span class="cm-comment">-- 是否上架</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; rdate <span class="cm-builtin">VARCHAR</span>(<span class="cm-number">19</span>) <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span>, <span class="cm-comment">-- 上架时间</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; isThemeTour <span class="cm-builtin">CHAR</span>(<span class="cm-number">1</span>) <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span>, <span class="cm-comment">-- 是否主题旅游</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; acount <span class="cm-builtin">INT</span> DEFAULT <span class="cm-number">0</span>, <span class="cm-comment">-- 收藏数量</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; cid <span class="cm-builtin">INT</span> <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span>, <span class="cm-comment">-- 所属分类</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; rimage <span class="cm-builtin">VARCHAR</span>(<span class="cm-number">200</span>) <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span>, <span class="cm-comment">-- 缩略图地址</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; CONSTRAINT ro_cid_ref_cate_id FOREIGN KEY(cid) REFERENCES tab_category(cid)</span></pre><pre class=""><span style="padding-right: 0.1px;">);</span></pre></div></div></div></div></div></div></div></pre><ul><li>添加旅游线路数据</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> tab_route <span class="cm-keyword">VALUES</span></span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-atom">NULL</span>, <span class="cm-string">'【厦门+鼓浪屿+南普陀寺+曾厝垵 高铁3天 惠贵团】尝味友鸭面线 住1晚鼓浪屿'</span>, <span class="cm-number">1499</span>, <span class="cm-string">'春节国内游优惠：即日起至2018年1月31号，5-9人同时报名立减￥100/人，10人及以上同时报名立减￥150/人。仅限2月10-22日春节期间出发享优惠，自由行及特价产品不参与！'</span>, <span class="cm-number">1</span>, <span class="cm-string">'2018-01-27'</span>, <span class="cm-number">0</span>, <span class="cm-number">100</span>, <span class="cm-number">3</span>, <span class="cm-string">'c:\1.png'</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-atom">NULL</span>, <span class="cm-string">'【浪漫桂林 阳朔西街高铁3天纯玩 高级团】城徽象鼻山 兴坪漓江 西山公园'</span>, <span class="cm-number">699</span>, <span class="cm-string">'春节国内游优惠：即日起至2018年1月31号，5-9人同时报名立减￥100/人，10人及以上同时报名立减￥150/人。仅限2月10-22日春节期间出发享优惠，自由行及特价产品不参与！'</span>, <span class="cm-number">1</span>, <span class="cm-string">'2018-01-27'</span>, <span class="cm-number">0</span>, <span class="cm-number">66</span>, <span class="cm-number">3</span>, <span class="cm-string">'c:\2.png'</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-atom">NULL</span>, <span class="cm-string">'【爆款￥1699秒杀】泰国 曼谷 芭堤雅 金沙岛 杜拉拉水上市场 双飞六天【含送签费 泰风情 广州往返 特价团】'</span>, <span class="cm-number">1699</span>, <span class="cm-string">'1月15日至2月11日官网特卖！①出境全线正价线路（特价线除外）满2人立减￥60！满4人立减￥200！满5人立减￥500！'</span>, <span class="cm-number">1</span>, <span class="cm-string">'2018-01-27'</span>, <span class="cm-number">0</span>, <span class="cm-number">15</span>, <span class="cm-number">2</span>, <span class="cm-string">'c:\123.png'</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-atom">NULL</span>, <span class="cm-string">'【经典·狮航 ￥2399秒杀】巴厘岛双飞五天 抵玩【广州往返 特价团】'</span>, <span class="cm-number">2399</span>, <span class="cm-string">'官网特卖！2-3月出发，前10名网付立享￥2399/人！'</span>, <span class="cm-number">1</span>, <span class="cm-string">'2018-01-27'</span>, <span class="cm-number">0</span>, <span class="cm-number">22</span>, <span class="cm-number">2</span>, <span class="cm-string">'c:\3.png'</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-atom">NULL</span>, <span class="cm-string">'香港迪士尼乐园自由行2天【永东跨境巴士广东至迪士尼去程交通+迪士尼一日门票+香港如心海景酒店暨会议中心标准房1晚住宿】'</span>, <span class="cm-number">799</span>, <span class="cm-string">'永东巴士提供广东省内多个上车地点，购买后需自行致电永东巴士客服电话4008861668预约车位'</span>, <span class="cm-number">1</span>, <span class="cm-string">'2018-01-27'</span>, <span class="cm-number">0</span>, <span class="cm-number">38</span>, <span class="cm-number">4</span>, <span class="cm-string">'c:\4.png'</span>);</span></pre></div></div></div></div></div></div></div></pre><p><strong>多对多关系练习</strong>
一个用户收藏多个线路，一个线路被多个用户收藏
<img src='imgs\多对多练习01.png' alt='' />
<img src='imgs\多对多练习02.png' alt='' /></p><p>对于多对多的关系我们需要增加一张中间表来维护他们之间的关系
<img src='imgs\多对多练习03.png' alt='' /></p><p>具体操作：</p><ul><li>创建用户表</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLE</span> tab_user (</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; uid <span class="cm-builtin">INT</span> PRIMARY KEY AUTO_INCREMENT, <span class="cm-comment">-- 用户id</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; username <span class="cm-builtin">VARCHAR</span>(<span class="cm-number">100</span>) <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span> UNIQUE, <span class="cm-comment">-- 用户名</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; PASSWORD <span class="cm-builtin">VARCHAR</span>(<span class="cm-number">30</span>) <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span>, <span class="cm-comment">-- 密码</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; NAME <span class="cm-builtin">VARCHAR</span>(<span class="cm-number">100</span>), <span class="cm-comment">-- 真实姓名</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; birthday <span class="cm-builtin">DATE</span>, <span class="cm-comment">-- 生日</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; sex <span class="cm-builtin">CHAR</span>(<span class="cm-number">1</span>), <span class="cm-comment">-- 性别</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; telephone <span class="cm-builtin">VARCHAR</span>(<span class="cm-number">11</span>), <span class="cm-comment">-- 手机号</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; email <span class="cm-builtin">VARCHAR</span>(<span class="cm-number">100</span>), <span class="cm-comment">-- 邮箱</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; STATUS <span class="cm-builtin">CHAR</span>(<span class="cm-number">1</span>) <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span>, <span class="cm-comment">-- 是否激活状态</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; CODE <span class="cm-builtin">VARCHAR</span>(<span class="cm-number">32</span>) <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span> UNIQUE <span class="cm-comment">-- 激活码</span></span></pre><pre class=""><span style="padding-right: 0.1px;">);</span></pre></div></div></div></div></div></div></div></pre><ul><li>添加用户数据</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> tab_user <span class="cm-keyword">VALUES</span></span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-atom">NULL</span>, <span class="cm-string">'cz110'</span>, <span class="cm-number">123456</span>, <span class="cm-string">'老王'</span>, <span class="cm-string">'1977-07-07'</span>, <span class="cm-string">'男'</span>, <span class="cm-string">'13888888888'</span>, <span class="cm-string">'66666@qq.com'</span>, <span class="cm-string">'是'</span>, <span class="cm-string">'1386'</span>),</span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-atom">NULL</span>, <span class="cm-string">'cz119'</span>, <span class="cm-number">654321</span>, <span class="cm-string">'小王'</span>, <span class="cm-string">'1999-09-09'</span>, <span class="cm-string">'男'</span>, <span class="cm-string">'13999999999'</span>, <span class="cm-string">'99999@qq.com'</span>, <span class="cm-string">'是'</span>, <span class="cm-string">'9898'</span>);</span></pre></div></div></div></div></div></div></div></pre><ul><li>创建收藏表</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLE</span> tab_favorite (</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; fid <span class="cm-builtin">INT</span> PRIMARY KEY AUTO_INCREMENT, <span class="cm-comment">-- 收藏主键</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; rid <span class="cm-builtin">INT</span> <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span>, <span class="cm-comment">-- 旅游线路id</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; <span class="cm-builtin">DATE</span> <span class="cm-builtin">DATE</span> <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span>, <span class="cm-comment">-- 收藏时间</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; uid <span class="cm-builtin">INT</span> <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span> <span class="cm-comment">-- 用户id</span></span></pre><pre class=""><span style="padding-right: 0.1px;">);</span></pre></div></div></div></div></div></div></div></pre><ul><li>增加收藏表数据</li></ul><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px;"></div><div class="CodeMirror-vscrollbar"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> tab_favorite <span class="cm-keyword">VALUES</span></span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-atom">NULL</span>, <span class="cm-number">1</span>, <span class="cm-string">'2018-01-01'</span>, <span class="cm-number">1</span>), <span class="cm-comment">-- 老王选择厦门</span></span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-atom">NULL</span>, <span class="cm-number">1</span>, <span class="cm-string">'2018-01-01'</span>, <span class="cm-number">2</span>), <span class="cm-comment">-- 老王选择桂林</span></span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-atom">NULL</span>, <span class="cm-number">1</span>, <span class="cm-string">'2018-01-01'</span>, <span class="cm-number">3</span>), <span class="cm-comment">-- 老王选择泰国</span></span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-atom">NULL</span>, <span class="cm-number">2</span>, <span class="cm-string">'2018-01-01'</span>, <span class="cm-number">2</span>), <span class="cm-comment">-- 小王选择桂林</span></span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-atom">NULL</span>, <span class="cm-number">2</span>, <span class="cm-string">'2018-01-01'</span>, <span class="cm-number">3</span>), <span class="cm-comment">-- 小王选择泰国</span></span></pre><pre class=""><span style="padding-right: 0.1px;">(<span class="cm-atom">NULL</span>, <span class="cm-number">2</span>, <span class="cm-string">'2018-01-01'</span>, <span class="cm-number">5</span>); <span class="cm-comment">-- 小王选择迪士尼</span></span></pre></div></div></div></div></div></div></div></pre><h1><a name='header-c762' class='md-header-anchor '></a>第5章 三范式(了解)</h1><h2><a name='header-c763' class='md-header-anchor '></a>5.1 什么是范式</h2><p><strong>范式是指</strong>:设计数据库表的规则(Normal Form)</p><pre class='md-fences mock-cm' style='display:block;position:relative'>好的数据库设计对数据的存储性能和后期的程序开发，都会产生重要的影响。建立科学的，规范的数据库就需要满足一些规则来优化数据的设计和存储</pre><h2><a name='header-c768' class='md-header-anchor '></a>5.2 范式的基本分类</h2><p>​	目前关系数据库有六种范式：第一范式（1NF）、第二范式（2NF）、第三范式（3NF）、巴斯-科德范式（BCNF）、第四范式(4NF）和第五范式（5NF，又称完美范式）。满足最低要求的范式是第一范式（1NF）。在第一范式的基础上进一步满足更多规范要求的称为第二范式（2NF），其余范式以次类推。<strong>一般说来，数据库只需满足第三范式(3NF）就行了。</strong></p><h2><a name='header-c771' class='md-header-anchor '></a>5.3 第一范式</h2><p>​	即数据库表的每一列都是不可分割的原子数据项(业务逻辑层面)，而不能是集合、数组、记录等非原子数据项。即实体中的某个属性有多个值时，必须拆分为不同的属性。在符合第一范式（1NF）表中每个列的值只能是表的一个属性或一个属性的一部分。简而言之，第一范式每一列不可再拆分，称为原子性。
<strong>第一范式</strong>：每一列不能再拆分
<img src='imgs\范式01.png' alt='' /></p><blockquote><p>总结：如果不遵守第一范式，查询出数据还需要进一步处理（查询不方便）。遵守第一范式，需要什么字段的数据就查询什么数据（方便查询）。</p></blockquote><h2><a name='header-c779' class='md-header-anchor '></a>5.4 第二范式</h2><p>​	第二范式（2NF）要求数据库表中的每个实例或记录必须可以被唯一地区分。选取一个能区分每个实体的属性或属性组，作为实体的唯一标识。例如在员工表中的身份证号码即可实现每个员工的区分，该身份证号码即为候选键，任何一个候选键都可以被选作主键。在找不到候选键时，可额外增加属性以实现区分。</p><pre class='md-fences mock-cm' style='display:block;position:relative'>第二范式（2NF）要求实体的属性完全依赖于主关键字。所谓完全依赖是指不能存在仅依赖主关键字一部分的属性。如果存在，那么这个属性和主关键字的这一部分应该分离出来形成一个新的实体，新实体与原实体之间是一对多的关系。为实现区分通常需要为表加上一个列，以存储各个实例的唯一标识。简而言之，第二范式就是在第一范式的基础上属性完全依赖于主键。</pre><p><strong>第二范式</strong>：</p><ol><li>一张表只描述一件事情</li><li>表中的每一个字段都依赖于主键
<img src='imgs\范式03.png' alt='' /></li></ol><blockquote><p>总结：如果不准守第二范式，数据冗余，相同数据无法区分。遵守第二范式减少数据冗余，通过主键区分相同数据。</p></blockquote><h2><a name='header-c796' class='md-header-anchor '></a>5.5 第三范式</h2><p>​	在2NF基础上，任何非主属性不依赖于其它非主属性（在2NF基础上消除传递依赖）
第三范式（3NF）是第二范式（2NF）的一个子集，即满足第三范式（3NF）必须满足第二范式（2NF）。简而言之，第三范式（3NF）要求一个关系中不包含已在其它关系已包含的非主关键字信息。</p><p></p><p>非主键必须依赖主键而不能依赖其它的非主键。</p><p><strong>第三范式</strong>：从表的外键必须使用主表的主键
<img src='imgs\范式04.png' alt='' /></p><blockquote><p>总结：如果不准守第三范式，可能会有相同数据无法区分，修改数据的时候多张表都需要修改（不方便修改）。遵守第三范式通过id可以区分相同数据，修改数据的时候只需要修改一张表（方便修改）。</p></blockquote></div>
</body>
</html>